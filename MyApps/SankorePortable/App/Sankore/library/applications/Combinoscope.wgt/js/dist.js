!function(){"use strict";Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),window.klass={create:function(){var a=Object.create(this);return"function"==typeof a.constructor&&a.constructor.apply(a,arguments),a},extend:function(a){var b=Object.create(this);return a?(Object.keys(a).forEach(function(c){b[c]=a[c]}),b):b},define:function(a,b,c){var d=function(a,b){var c,e=a.split(".");return e.length>0?(c=e.shift(),"undefined"==typeof b[c]&&(b[c]={}),e.length>0?d(e.join("."),b[c]):b[c]):null},e=d(a,window);e[b]=c}}}(),function(){"use strict";klass.define("Sankore","Combinoscope",klass.extend({constructor:function(a,b){this.letters=Sankore.Util.Hash.create(),this.layouts=Sankore.Util.Hash.create(),this.eventDispatcher=Sankore.Util.EventDispatcher.create(),this.ui=Sankore.UI.Interface.create(a,this),this.word=[],this.layout=null,this.editor=!1,this.threeBlocks=!1,"function"==typeof b.ready&&this.eventDispatcher.addEventListener("combinoscope.create",b.ready.bind(this)),this.attachEventHandlers(),this.eventDispatcher.notify("combinoscope.create")},attachEventHandlers:function(){var a=this.eventDispatcher,b=this;a.addEventListener("ui.mode_changed",function(a){b.setThreeBlocksMode(a.mode)}),a.addEventListener("ui.layout_selected",function(a){b.setCurrentLayout(a.layout)}),a.addEventListener("ui.clear_clicked",function(){b.clearWord()}),a.addEventListener("ui.letter_dropped",function(a){b.addToWord(a.letterId,a.before)}),a.addEventListener("ui.letter_removed",function(a){b.removeLetterFromWord(a.before)}),a.addEventListener("ui.editor_clicked",function(){b.editor?b.disableEditor():b.enableEditor()}),a.addEventListener("ui.letter_clicked",function(a){a.active?b.unselectLetter(a.letterId):b.selectLetter(a.letterId)}),a.addEventListener("ui.add_layout_clicked",function(){b.setCurrentLayout(b.duplicateLayout())}),a.addEventListener("ui.delete_layout_clicked",function(){b.deleteLayout(),b.setCurrentLayout("default")}),a.addEventListener("ui.layout_name_changed",function(a){b.renameLayout(a.name)}),a.addEventListener("ui.select_all_layout_clicked",function(){b.selectAllLetters()}),a.addEventListener("ui.unselect_all_layout_clicked",function(){b.unselectAllLetters()})},init:function(a,b){var c,d,e=this,f=Sankore.Layout.create("Tout",!1);this.layouts.set("default",f),"layouts"in a&&Object.keys(a.layouts).forEach(function(b){e.layouts.set(b,Sankore.Layout.create(a.layouts[b],!1))}),"letters"in a&&a.letters.length>0&&a.letters.forEach(function(a){c=Sankore.Letter.create(a[1],a[0]),e.letters.set(c.id,c),f.addLetter(c.id),a[2].forEach(function(a){d=e.layouts.get(a),d&&d.addLetter(c.id)})}),"layouts"in b&&Object.keys(b.layouts).forEach(function(a){var c=Sankore.Layout.create(b.layouts[a].name,!0);c.letters=b.layouts[a].letters,e.layouts.set(a,c)}),this.layout="current"in b?b.current:"default","mode"in b&&(this.threeBlocks=!!b.mode),this.ui.render(),"word"in b&&(this.word=b.word,this.notifyWordChanged()),"editor"in b&&b.editor&&this.enableEditor(),this.eventDispatcher.notify("combinoscope.init",{combinoscope:this})},getState:function(){var a={};return this.layouts.map(function(b,c){c.editable&&(a[b]=c)}),{mode:this.threeBlocks,layouts:a,current:this.layout,editor:this.editor,word:this.word}},enableEditor:function(){this.editor=!0,this.clearWord(),this.eventDispatcher.notify("combinoscope.editor_enabled")},disableEditor:function(){this.editor=!1,this.eventDispatcher.notify("combinoscope.editor_disabled")},getCurrentLayout:function(){return this.layouts.get(this.layout)},setCurrentLayout:function(a){this.layout=a,this.clearWord(),this.eventDispatcher.notify("combinoscope.layout_selected",{layout:this.getCurrentLayout(),id:a})},duplicateLayout:function(){var a,b=this.getCurrentLayout(),c=Sankore.Layout.create(b.name+" (Copie)",!0);return c.setLetters(b.letters.slice()),a=Sankore.Util.UID.generate(),this.layouts.set(a,c),this.eventDispatcher.notify("combinoscope.layout_created",{layout:c,id:a}),a},deleteLayout:function(){this.getCurrentLayout().editable&&(this.layouts.remove(this.layout),this.eventDispatcher.notify("combinoscope.layout_deleted",{id:this.layout}))},renameLayout:function(a){var b=this.getCurrentLayout();b.editable&&(b.name=a,this.eventDispatcher.notify("combinoscope.layout_renamed",{name:a}))},isThreeBlocksMode:function(){return this.threeBlocks},setThreeBlocksMode:function(a){this.threeBlocks=a,this.clearWord(),this.eventDispatcher.notify("combinoscope.mode_changed",{mode:this.threeBlocks})},addToWord:function(a,b){b="undefined"!=typeof b?b:!1,this.isLetterAllowed(a,b)&&(this.word[b?"unshift":"push"](a),this.notifyWordChanged())},isLetterAllowed:function(a,b){var c=this.letters.get(a);return c?0===this.word.length?!0:this.word.length===(this.isThreeBlocksMode()?3:2)?!1:c.type===this.letters.get(this.word[b?0:this.word.length-1]).type?!1:!0:!1},removeLetterFromWord:function(a){this.word.length>0&&(this.word[a?"shift":"pop"](),this.notifyWordChanged())},clearWord:function(){this.word=[],this.notifyWordChanged()},notifyWordChanged:function(){var a=this;this.eventDispatcher.notify("combinoscope.word_changed",{word:this.word.map(function(b){return a.letters.get(b)})})},getCurrentLetters:function(a){var b=this.getCurrentLayout();if(!b)throw new Error("No layout is selected");return this.letters.map(function(c,d){return!b.containLetter(c)||"undefined"!=typeof a&&a!==d.type?null:d})},selectLetter:function(a){var b=this.getCurrentLayout();b.editable&&(b.addLetter(a),this.eventDispatcher.notify("combinoscope.letter_selected",{letter:this.letters.get(a)}))},unselectLetter:function(a){var b=this.getCurrentLayout();b.editable&&(b.removeLetter(a),this.eventDispatcher.notify("combinoscope.letter_unselected",{letter:this.letters.get(a)}))},selectAllLetters:function(){var a=this;this.letters.map(function(b){a.selectLetter(b)})},unselectAllLetters:function(){var a=this;this.letters.map(function(b){a.unselectLetter(b)})}}))}(),function(){"use strict";klass.define("Sankore","Layout",klass.extend({constructor:function(a,b){this.name=a,this.editable="undefined"!=typeof b?b:!0,this.letters=[]},setLetters:function(a){this.letters=a},addLetter:function(a){this.containLetter(a)||this.letters.push(a)},containLetter:function(a){return-1!==this.letters.indexOf(a)},removeLetter:function(a){this.containLetter(a)&&this.letters.splice(this.letters.indexOf(a),1)}}))}(),function(){"use strict";klass.define("Sankore","Letter",klass.extend({constructor:function(a,b){if(this.name=a.toLowerCase(),"C"!==b&&"V"!==b)throw new Error("Letter must be type C or V");this.type=b,this.id=this.type+this.name}}))}(),function(){"use strict";klass.define("Sankore.UI","DragDropManager",klass.extend({constructor:function(a){this.eventDispatcher=a,this.drag=null,this.ghost=null,this.attachEventHandlers()},attachEventHandlers:function(){var a=this;document.addEventListener("mouseup",function(){a.isDragging()&&a.endDrag()}),document.addEventListener("mousemove",function(b){a.isDragging()&&a.ghost&&a.moveGhostObject(b.x,b.y)})},registerDraggable:function(a,b){var c=this;a.addEventListener("mousedown",function(){c.isDraggable(a)&&c.startDrag(a)}),"undefined"!=typeof b&&b||(b="_global"),a.dataset.draggable="true",a.dataset.dragGroup=b},registerDropzone:function(a,b){var c=this;a.addEventListener("mouseup",function(b){b.stopPropagation(),c.isDroppable(a)&&c.endDrag(a)}),a.addEventListener("mouseover",function(){c.isDroppable(a)&&c.fireDragEnter(a)}),a.addEventListener("mouseout",function(){c.isDroppable(a)&&c.fireDragLeave(a)}),"undefined"!=typeof b&&b||(b="_global"),a.dataset.droppable="true",a.dataset.dragGroup=b},isDraggable:function(a){return this.isDragging()?!1:"draggable"in a.dataset&&"true"===a.dataset.draggable},isDroppable:function(a){return this.isDragging()?"droppable"in a.dataset&&"true"===a.dataset.droppable:!1},isDragging:function(){return null!==this.drag},startDrag:function(a){this.drag={element:a},this.createGhostObject(a),this.eventDispatcher.notify("dragdrop_manager.dragstart",{source:a,group:a.dataset.dragGroup})},createGhostObject:function(a){this.ghost=a.cloneNode(!0),this.ghost.style.position="absolute",this.ghost.style.pointerEvents="none",this.moveGhostObject(a.offsetLeft,a.offsetTop),a.parentElement.insertBefore(this.ghost,a.parentElement.firstChild)},moveGhostObject:function(a,b){var c=[this.ghost.clientWidth/2,this.ghost.clientHeight/2];this.ghost.style.left=Math.max(0,Math.min(window.innerWidth-2*c[0],a-c[0]))+"px",this.ghost.style.top=Math.max(0,Math.min(window.innerHeight-2*c[1],b-c[1]))+"px"},removeGhostObject:function(){this.ghost.parentElement&&this.ghost.parentElement.removeChild(this.ghost),this.ghost=null},endDrag:function(a){this.eventDispatcher.notify("dragdrop_manager.dragend",{source:this.drag.element,group:this.drag.element.dataset.dragGroup}),a&&this.drag.element.dataset.dragGroup===a.dataset.dragGroup&&(this.eventDispatcher.notify("dragdrop_manager.drop",{source:this.drag.element,destination:a,group:this.drag.element.dataset.dragGroup}),this.fireDragLeave(a)),this.removeGhostObject(),this.drag=null},fireDragEnter:function(a){this.drag.element.dataset.dragGroup===a.dataset.dragGroup&&this.eventDispatcher.notify("dragdrop_manager.dragenter",{source:this.drag.element,zone:a,group:this.drag.element.dataset.dragGroup})},fireDragLeave:function(a){this.drag.element.dataset.dragGroup===a.dataset.dragGroup&&this.eventDispatcher.notify("dragdrop_manager.dragleave",{source:this.drag.element,zone:a,group:this.drag.element.dataset.dragGroup})}}))}(),function(){"use strict";klass.define("Sankore.UI","Interface",klass.extend({constructor:function(a,b){this.id=a,this.combinoscope=b,this.dragdrop=Sankore.UI.DragDropManager.create(this.combinoscope.eventDispatcher),this.lettersZone={},this.wordZone=null,this.editor=null,this.layoutSelectControl=null,this.layoutNameControl=null,this.layoutAddButton=null,this.layoutDeleteButton=null,this.layoutSelectAllButton=null,this.layoutUnselectAllButton=null,this.helpZone=null,this.attachEventHandlers(),this._root=null},attachEventHandlers:function(){var a=this.combinoscope.eventDispatcher,b=this;a.addEventListener("combinoscope.word_changed",function(a){b.renderWord(a.word)}),a.addEventListener("combinoscope.layout_selected",function(a){b.renderAllLetters(),b.layoutSelectControl.value=a.id,b.combinoscope.editor&&b.loadLayout(a.layout)}),a.addEventSubscriber({events:["combinoscope.layout_created","combinoscope.layout_deleted","combinoscope.layout_renamed"],listener:function(){b.loadLayoutSelectControl()}}),a.addEventListener("combinoscope.editor_enabled",function(){b.showEditor()}),a.addEventListener("combinoscope.editor_disabled",function(){b.hideEditor()}),a.addEventListener("combinoscope.letter_selected",function(a){b.selectLetter(a.letter)}),a.addEventListener("combinoscope.letter_unselected",function(a){b.unselectLetter(a.letter)}),a.addEventListener("dragdrop_manager.dragstart",function(a){"add"===a.group&&b.showPlaceholders(a.source.dataset.id)}),a.addEventListener("dragdrop_manager.dragend",function(){b.hidePlaceholders()}),a.addEventListener("dragdrop_manager.dragenter",function(a){a.zone.classList.add("hover")}),a.addEventListener("dragdrop_manager.dragleave",function(a){a.zone.classList.remove("hover")}),a.addEventListener("dragdrop_manager.drop",function(b){switch(b.group){case"add":a.notify("ui.letter_dropped",{letterId:b.source.dataset.id,before:"left"===b.destination.dataset.position});break;case"remove":a.notify("ui.letter_removed",{before:"0"===b.source.dataset.index})}})},_clearElement:function(a){for(;a.firstChild;)a.removeChild(a.firstChild)},render:function(){this.createBaseMarkup(),this.loadLayoutSelectControl(),this.renderAllLetters(),this.renderWord([])},renderAllLetters:function(){this.renderLetters("C"),this.renderLetters("V")},renderLetters:function(a){var b,c,d=this.lettersZone[a];if(!d)throw new Error('"'+a+'" zone is not rendered yet');for(var e=d.getElementsByClassName("letter");e.length>0;)d.removeChild(e[0]);if(b=this.combinoscope.editor?this.combinoscope.letters.map(function(b,c){return c.type===a?c:null}):this.combinoscope.getCurrentLetters(a)){var f,g=document.createDocumentFragment();for(c in b)f=this.combinoscope.editor?this.createEditorLetter(b[c]):this.createLetter(b[c],!0),g.appendChild(f);d.appendChild(g)}},renderWord:function(a){for(var b=this,c=this.wordZone.querySelector(".container"),d=this.wordZone.getElementsByClassName("placeholder"),e=a.length,f=0;d.length>0;)this.wordZone.removeChild(d[0]);this._clearElement(c),this.wordZone.insertBefore(this.createPlaceholder("left"),c),a.forEach(function(d,g){d=b.createLetter(d,0===g||g===a.length-1,g),0===f&&d.classList.add("first"),e-1===f&&d.classList.add("last"),c.appendChild(d),f++}),a.length>0&&this.wordZone.appendChild(this.createPlaceholder("right"))},createLetter:function(a,b,c){var d=this.createBaseLetterSpan(),e="add";switch(a.type){case"C":d.classList.add("consonant");break;case"V":d.classList.add("vowel")}return d.dataset.id=a.id,d.appendChild(document.createTextNode(a.name)),"undefined"!=typeof c&&(d.dataset.index=c,e="remove"),b&&this.dragdrop.registerDraggable(d,e),d},createEditorLetter:function(a){var b=this.createLetter(a,!1),c=this.combinoscope.eventDispatcher;return b.addEventListener("click",function(){c.notify("ui.letter_clicked",{letterId:a.id,active:!b.classList.contains("disabled")})}),b},createPlaceholder:function(a){var b=this.createBaseLetterSpan();return b.classList.add("placeholder"),b.dataset.position="undefined"==typeof a?"left":a,b.style.visibility="hidden",this.dragdrop.registerDropzone(b,"add"),b},createBaseLetterSpan:function(){var a=document.createElement("span");return a.className="letter",a},getRootElement:function(){return null===this._root&&(this._root=document.getElementById(this.id)),this._root},createBaseMarkup:function(){var a,b=this.getRootElement(),c=document.createDocumentFragment(),d=[];this._clearElement(b),b.classList.add("combinoscope"),d[0]=document.createElement("div"),d[0].className="header",a=document.createElement("h1"),a.appendChild(document.createTextNode("Combinoscope")),d[0].appendChild(a),d[0].appendChild(this.createControls()),d[1]=document.createElement("div"),d[1].className="letters",d[1].appendChild(this.createLettersZoneMarkup("C")),d[1].appendChild(this.createLettersZoneMarkup("V")),d.push(this.wordZone=this.createWordZone()),d.push(this.editor=this.createEditor());for(var e in d)c.appendChild(d[e]);b.appendChild(c)},createWordZone:function(){var a=document.createElement("a"),b=this.combinoscope.eventDispatcher,c=document.createElement("div"),d=document.createElement("div");return c.className="word",d.className="container",a.appendChild(document.createTextNode("Recommencer")),a.className="clear",a.addEventListener("click",function(a){a.preventDefault(),b.notify("ui.clear_clicked")}),c.appendChild(a),c.appendChild(d),c},createEditor:function(){var a=document.createElement("div");return a.className="editor",a.style.display="none",a.appendChild(this.wrapControl(this.layoutAddButton=this.createButton("Ajouter","ui.add_layout_clicked"),"add_layout_control")),a.appendChild(this.wrapControl(this.layoutNameControl=this.createLayoutNameControl(),"layout_name_control","Nom du groupe")),a.appendChild(this.wrapControl(this.layoutSelectAllButton=this.createButton("Tout sélectionner","ui.select_all_layout_clicked"),"select_all_layout_control")),a.appendChild(this.wrapControl(this.layoutUnselectAllButton=this.createButton("Tout désélectionner","ui.unselect_all_layout_clicked"),"unselect_all_layout_control")),a.appendChild(this.wrapControl(this.layoutDeleteButton=this.createButton("Supprimer","ui.delete_layout_clicked"),"delete_layout_control")),this.helpZone=document.createElement("div"),this.helpZone.className="help",a.appendChild(this.helpZone),a},showEditor:function(){this.editor.style.display="block",this.wordZone.style.display="none",this.renderAllLetters(),this.loadLayout(this.combinoscope.getCurrentLayout())},hideEditor:function(){this.editor.style.display="none",this.wordZone.style.display="block",this.renderAllLetters()},loadLayout:function(a){var b=this;this.layoutNameControl.value=a.name,this.layoutNameControl.disabled=!a.editable,this.layoutDeleteButton.disabled=!a.editable,this.layoutSelectAllButton.disabled=!a.editable,this.layoutUnselectAllButton.disabled=!a.editable,this.combinoscope.letters.map(function(c,d){a.containLetter(c)?b.selectLetter(d):b.unselectLetter(d)}),this.updateHelpZone(a)},createLettersZoneMarkup:function(a){this.lettersZone[a]=document.createElement("div");var b,c,d=document.createElement("h2");switch(a){case"V":b="Voyelles",c="vowels";break;case"C":b="Consonnes",c="consonants"}return this.lettersZone[a].className=c,d.appendChild(document.createTextNode(b)),this.lettersZone[a].appendChild(d),this.dragdrop.registerDropzone(this.lettersZone[a],"remove"),this.lettersZone[a]},createControls:function(){var a=document.createDocumentFragment();return a.appendChild(this.wrapControl(this.createModeControl(),"mode_control","Blocs")),a.appendChild(this.wrapControl(this.layoutSelectControl=this.createLayoutSelectControl(),"layout_control","Groupe")),a.appendChild(this.wrapControl(this.createButton("Editeur","ui.editor_clicked"),"editor_control")),a},createModeControl:function(){var a=document.createDocumentFragment(),b=document.createElement("span"),c=document.createElement("span"),d=document.createElement("input"),e=this.combinoscope.eventDispatcher;return b.appendChild(document.createTextNode("2")),c.appendChild(document.createTextNode("3")),d.setAttribute("type","checkbox"),d.setAttribute("id","mode_control"),d.addEventListener("change",function(a){a.preventDefault(),e.notify("ui.mode_changed",{mode:this.checked})}),d.checked=this.combinoscope.isThreeBlocksMode(),a.appendChild(b),a.appendChild(d),a.appendChild(c),a},createLayoutSelectControl:function(){var a=document.createElement("select"),b=this.combinoscope.eventDispatcher;return a.setAttribute("id","layout_control"),a.addEventListener("change",function(){b.notify("ui.layout_selected",{layout:a.value})}),a},createLayoutNameControl:function(){var a=document.createElement("input"),b=this.combinoscope.eventDispatcher;return a.type="text",a.id="name_control",a.required=!0,a.pattern=".{1,30}",a.addEventListener("keyup",function(){b.notify("ui.layout_name_changed",{name:this.value})}),a},createButton:function(a,b){var c=document.createElement("button"),d=this.combinoscope.eventDispatcher;return c.appendChild(document.createTextNode(a)),c.type="button",c.addEventListener("click",function(a){a.preventDefault(),d.notify(b)}),c},loadLayoutSelectControl:function(){var a,b=this.layoutSelectControl;this._clearElement(b),this.combinoscope.layouts.map(function(c,d){a=document.createElement("option"),a.text=d.name,a.value=c,b.add(a)}),b.value=this.combinoscope.layout},wrapControl:function(a,b,c){var d=document.createElement("div");if(d.className="control","undefined"!=typeof b&&(d.classList.add(b.replace(/_/g,"-")),"undefined"!=typeof c)){var e=document.createElement("label");e.setAttribute("for",b),e.appendChild(document.createTextNode(c)),d.appendChild(e)}return d.appendChild(a),d},showPlaceholders:function(a){var b=this;Array.prototype.forEach.call(this.getAllPlaceholders(),function(c){b.combinoscope.isLetterAllowed(a,"left"===c.dataset.position)&&(c.style.visibility="visible")})},hidePlaceholders:function(){Array.prototype.forEach.call(this.getAllPlaceholders(),function(a){a.style.visibility="hidden"})},getAllPlaceholders:function(){return this.wordZone.querySelectorAll(".placeholder")},selectLetter:function(a){var b,c=this.lettersZone[a.type];c&&(b=c.querySelector('[data-id="'+a.id+'"]'),b&&b.classList.remove("disabled"))},unselectLetter:function(a){var b,c=this.lettersZone[a.type];c&&(b=c.querySelector('[data-id="'+a.id+'"]'),b&&b.classList.add("disabled"))},updateHelpZone:function(a){this.helpZone.innerText=a.editable?"Sélectionner les lettres que vous souhaitez faire apparaître en cliquant dessus":"Ce groupe n'est pas modifiable. Cliquez sur le bouton + pour créer un nouveau groupe"},getTotalHeight:function(){for(var a=0,b=this.getRootElement().childNodes,c=0;c<b.length;c++)a+=b[c].offsetHeight;return a}}))}(),function(){"use strict";klass.define("Sankore.Util","EventDispatcher",klass.extend({constructor:function(){this.eventListeners={}},addEventSubscriber:function(a){for(var b in a.events)this.addEventListener(a.events[b],a.listener);return this},addEventListener:function(a,b,c){return"undefined"==typeof this.eventListeners[a]&&(this.eventListeners[a]=[]),"undefined"==typeof c?this.eventListeners[a].push(b):this.eventListeners[a][c]=b,this},removeEventListener:function(a,b){delete this.eventListeners[a][b]},removeAllEventListeners:function(a){this.eventListeners[a]=[]},notify:function(a,b){var c,d=this.eventListeners[a]||[],e=this;Object.keys(this.eventListeners).map(function(b){if(-1!==b.indexOf("*")&&b!==a){var c=new RegExp(b.replace("*","(.*)"));c.test(a)&&(d=d.concat(e.eventListeners[b]))}});for(c in d)d[c](b)}}))}(),function(){"use strict";klass.define("Sankore.Util","Hash",klass.extend({constructor:function(a){this.elements=a||{}},length:function(){return this.keys().length},keys:function(){return Object.keys(this.elements)},set:function(a,b){this.elements[a]=b},add:function(a,b){for(var c in b)this.set(b[c][a],b[c])},get:function(a,b){return"undefined"!=typeof this.elements[a]?this.elements[a]:"undefined"!=typeof b?b:null},pos:function(a){var b=0;for(var c in this.elements){if(this.elements.hasOwnProperty(c)&&c===a)return b;b++}return null},remove:function(a){return delete this.elements[a]},map:function(a){var b,c=[];for(var d in this.elements)this.elements.hasOwnProperty(d)&&(b=a.call(this,d,this.elements[d]),b&&c.push(b));return c},values:function(){return this.map(function(a,b){return b})}}))}(),function(){"use strict";klass.define("Sankore.Util","UID",{generate:function(){var a,b="",c=new Date,d=0;for(a=0;a<document.URL.length;a++)b+=String(document.URL.charCodeAt(a)*(c.getMilliseconds()+c.getSeconds()+c.getMinutes()+Math.round(1e3*Math.random())));b=b.match(/.{1,10}/g);for(a in b)d+=Number(b[a]);return d.toString(36)}})}();